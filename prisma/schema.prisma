generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Cliente {
  id            Int            @id @default(autoincrement())
  nome          String         @db.VarChar(100)
  telefone      String?        @db.VarChar(20)
  email         String?        @db.VarChar(100)
  dataCadastro  DateTime?      @map("data_cadastro") @db.Date
  agendamentos  Agendamento[]

  @@map("clientes")
}

model Servico {
  id            Int            @id @default(autoincrement())
  nomeServico   String         @map("nome_servico") @db.VarChar(100)
  descricao     String?        @db.Text
  duracao       Int?           // duração em minutos
  preco         Decimal?       @db.Decimal(10, 2)
  agendamentos  Agendamento[]

  @@map("servicos")
}

model Profissional {
  id            Int            @id @default(autoincrement())
  nome          String         @db.VarChar(100)
  especialidade String?        @db.VarChar(100)
  telefone      String?        @db.VarChar(20)
  agendamentos  Agendamento[]

  @@map("profissionais")
}

model Agendamento {
  id              Int          @id @default(autoincrement())
  idCliente       Int          @map("id_cliente")
  idServico       Int          @map("id_servico")
  idProfissional  Int          @map("id_profissional")
  dataAgendamento DateTime     @map("data_agendamento") @db.Date
  horario         DateTime     @db.Time(0)
  status          String?      @default("agendado") @db.VarChar(20)
  observacoes     String?      @db.Text
  
  cliente         Cliente      @relation(fields: [idCliente], references: [id])
  servico         Servico      @relation(fields: [idServico], references: [id])
  profissional    Profissional @relation(fields: [idProfissional], references: [id])

  @@map("agendamentos")
}

model HorarioDisponivel {
  id            Int      @id @default(autoincrement())
  diaSemana     String   @map("dia_semana") @db.VarChar(20)
  horarioInicio DateTime @map("horario_inicio") @db.Time(0)
  horarioFim    DateTime @map("horario_fim") @db.Time(0)
  disponivel    Boolean? @default(true)

  @@map("horarios_disponiveis")
}